<ion-view view-title="{{'transactions.medcard_replacement.title' | translate}}"><ion-content class="page-padding details-palan-wrapper"><div class="progress-container"><div class="progress-line"><div class="line line-3"><div class="progress-50"></div></div><div ng-class="{current:steps===1, completed:steps!==1}" class="stage stage-4"><span ng-if="steps==1" class="step-number">1</span><span ng-if="steps!=1" class="step-number ion-checkmark"></span><div class="step-label"> </div></div><div ng-class="{current:steps===2, completed:steps&gt;2}" class="stage stage-4"><span ng-if="steps!=4" class="step-number">2</span><span ng-if="steps&gt;2" class="step-number ion-checkmark"></span><div class="step-label"> </div></div><div ng-class="{current:steps===3, completed:steps===4}" class="stage stage-4"><span ng-if="steps!=4" class="step-number">3</span><span ng-if="steps==4" class="step-number ion-checkmark"></span><div class="step-label"> </div></div><div ng-class="{current:steps===4}" class="stage stage-4"><span class="step-number">4</span><div class="step-label"> </div></div></div></div><div id="step1" ng-if="steps===1"><div class="center margin-bottom-xl"><h2 translate="transactions.medcard_replacement.page1_title"></h2></div><div class="row"><div class="col-90 center-block"><h3 translate="transactions.medcard_replacement.policy_selection_title"> </h3><div class="row has-border-padding margin-bottom-small"><div class="col-33"><span translate="transactions.medcard_replacement.plan_name" class="pol-value"></span><span class="pol-property">{{data.policyOwnerInfo.planName}}</span></div><div class="col-33"><span translate="transactions.medcard_replacement.policy_no" ,="," ng-if="data._Info.lineOfBiz !=='LAFT'" class="pol-value"></span><span translate="takaful.policy_no" ng-if="data._Info.lineOfBiz ==='LAFT'" class="pol-value"> </span><span class="pol-property">{{data.policyOwnerInfo.policyNo}}</span></div><div class="col-33"><span translate="transactions.medcard_replacement.insured_name" class="pol-value"></span><span class="pol-property">{{data.policyOwnerInfo.name}}</span></div></div><h3 translate="transactions.medcard_replacement.candicate_selection_title" class="margin-bottom-large"></h3><div class="form-container"><form name="medCardCandidateForm"><div ng-repeat="item in data.coveredMember track by $index"><div ng-if="$even" class="row"><div ng-if="data.coveredMember[$index]" class="col-50"><div class="item item-checkbox"><label class="checkbox"> <input type="checkbox" name="candidate_{{item.id}}" ng-model="item.isSelected" checklist-model="viewData.selectedCandidates" checklist-value="item" checklist-change="onChange($index)" required="required" ng-checked="item.isSelected"/></label>{{item.name}}</div></div><div ng-if="data.coveredMember[$index +1]" ng-init="item2 = data.coveredMember[$index +1]" class="col-50"><div class="item item-checkbox"><label class="checkbox"> <input type="checkbox" name="candidate_{{item2.id}}" ng-model="item2.isSelected" checklist-model="viewData.selectedCandidates" checklist-value="item2" checklist-change="onChange($index +1)" ng-checked="item2.isSelected" required="required"/></label>{{item2.name}}</div></div></div></div></form></div></div></div><button ng-click="updateState(2)" translate="transactions.medcard_replacement.next" ng-disabled="viewData.selectedCandidates.length === 0" class="center-block button button-major button-wide"></button></div><div id="step2" ng-if="steps===2" class="ng-enter"><div class="center margin-bottom-xl"><h2 translate="transactions.medcard_replacement.page2_title"></h2></div><div class="row margin-bottom-xs"><div class="col-90 center-block null-row-padding"><h3 translate="transactions.medcard_replacement.policy_selection_title"></h3><div class="row has-border-padding margin-bottom-small"><div class="col-33"><span translate="transactions.medcard_replacement.plan_name" class="pol-value"></span><span class="pol-property">{{data.policyOwnerInfo.planName}}</span></div><div class="col-33"><span translate="transactions.medcard_replacement.policy_no" ,="," ng-if="data._Info.lineOfBiz !=='LAFT'" class="pol-value"></span><span translate="takaful.policy_no" ng-if="data._Info.lineOfBiz ==='LAFT'" class="pol-value"> </span><span class="pol-property">{{data.policyOwnerInfo.policyNo}}</span></div><div class="col-33"><span translate="transactions.medcard_replacement.insured_name" class="pol-value"></span><span class="pol-property">{{data.policyOwnerInfo.name}}</span></div></div><div class="form-container"><form name="medCardDeliveryForm"><h3 translate="transactions.medcard_replacement.enter_delivery_address_title"></h3><div class="row margin-bottom-xs"><div class="col-50 padding-right-medium"><span translate="transactions.medcard_replacement.address1" class="pol-value"></span><label class="item item-input input-margin"><input type="text" name="address1" ng-model="data.addressInfo.address1" maxlength="30" required="required"/></label></div><div class="col-50 padding-left-medium"><span translate="transactions.medcard_replacement.postcode" class="pol-value"></span><label class="item item-input input-margin"><input type="text" name="postcode" ng-model="data.addressInfo.postCode" ng-blur="populatePostcode()" required="required" maxlength="5" pattern="[0-9]{5}"/></label></div></div><div class="row margin-bottom-xs"><div class="col-50 padding-right-medium"><span translate="transactions.medcard_replacement.address2" class="pol-value"></span><label class="item item-input input-margin"><input type="text" name="address2" ng-model="data.addressInfo.address2" maxlength="30"/></label></div><div ng-show="data.addressInfo.country===&quot;MAL&quot;" class="col-50 padding-left-medium"><span translate="transactions.medcard_replacement.state" class="pol-value"></span><label class="item item-input selectArrow"><select ng-model="data.addressInfo.state" ng-options="state as state for state in viewData.states" ng-required="data.addressInfo.country===&quot;MAL&quot;"></select></label></div></div><div class="row margin-bottom-xs"><div class="col-50 padding-right-medium"><span translate="transactions.medcard_replacement.address3" class="pol-value"></span><label class="item item-input input-margin"><input type="text" name="address3" ng-model="data.addressInfo.address3" maxlength="30"/></label></div><div class="col-50 padding-left-medium"><span translate="transactions.medcard_replacement.country" class="pol-value"></span><label class="item item-input selectArrow"><select ng-model="data.addressInfo.country" ng-options="country.key as country.country for country in viewData.countries" required="required"></select></label></div></div></form></div></div></div><div class="row margin-top-medium"><div class="col"><div class="center-buttons"><button ng-click="updateState(1)" translate="transactions.medcard_replacement.prev" class="button button-calm button-wide button-major"></button><button ng-click="updateState(3)" translate="transactions.cc.next" ng-disabled="medCardDeliveryForm.$invalid" class="button button-major button-wide"></button></div></div></div></div><div id="step3" ng-if="steps===3" class="ng-enter"><div class="center margin-bottom-xl"><h2 translate="transactions.medcard_replacement.page3_title"></h2>
</div><div class="row"><div class="col-90 center-block null-row-padding"><div class="row has-border-padding margin-bottom-small"><div class="col-33"><span translate="transactions.medcard_replacement.plan_name" class="pol-value"></span><span class="pol-property">{{data.policyOwnerInfo.planName}}</span></div><div class="col-33"><span translate="transactions.medcard_replacement.policy_no" ,="," ng-if="data._Info.lineOfBiz !=='LAFT'" class="pol-value"></span><span translate="takaful.policy_no" ng-if="data._Info.lineOfBiz ==='LAFT'" class="pol-value"> </span><span class="pol-property">{{data.policyOwnerInfo.policyNo}}</span></div><div class="col-33"><span translate="transactions.medcard_replacement.insured_name" class="pol-value"></span><span class="pol-property">{{data.policyOwnerInfo.name}}</span></div></div><div class="col"><div class="row"><div class="col-67"><h3 translate="transactions.medcard_replacement.requested_members"></h3><ul class="bullet-list"><li ng-repeat="candidate in viewData.selectedCandidates">{{candidate.name}}</li></ul></div><div class="col-33"><div translate="transactions.medcard_replacement.to_be_delivered_to" class="h3"></div><span class="pol-value">{{data.addressInfo.address1}}</span><span class="pol-value">{{data.addressInfo.address2}}</span><span class="pol-value">{{data.addressInfo.address3}}</span><span class="pol-value">{{data.addressInfo.postCode}}, {{data.addressInfo.state}}, {{viewData.countryObj.country}}</span></div></div></div></div></div><div class="full-bleed margin-bottom-large margin-top-medium"><div class="row"><div class="col-90 center-block"><div class="form-container"><span translate="transactions.medcard_replacement.enter_vcode_title"> </span><span>&nbsp;</span><span class="font-bold">{{data.policyOwnerInfo.mobileNo | phonemask}}</span><span translate="transactions.medcard_replacement.enter_vcode_title2" class="pol-value"></span><form name="medCardVerificationForm" class="verification-block"><label class="item item-input margin-bottom-small margin-top-small"><input type="text" ng-model="data.verificationCode" placeholder="Enter verification code" translate="transactions.medcard_replacement.resend_code" minlength="6" maxlength="6" required="required" class="center-block"/></label><button ng-click="requestOTP()" translate="transactions.medcard_replacement.resend_code" required="required" class="button button-major button-wide button-calm"></button></form><form name="medCardTncForm" class="checkbox-display-with-terms"><div class="agree-checkbox margin-top-medium"><li class="item item-checkbox"><label class="checkbox"><input type="checkbox" ng-model="item.actions.loanSelected" ng-change="calcTotal('loan')" required="required"/></label><span>{{'transactions.medcard_replacement.read_tnc1' | translate}}&nbsp;</span></li><span translate="transactions.medcard_replacement.read_tnc2" ng-click="termsNconditions()" class="inline-link"> </span></div></form></div></div></div></div><div class="row"><div class="col"><div class="center-buttons"><button ng-click="cancel()" translate="transactions.medcard_replacement.cancel" class="button button-calm button-major button-wide button-calm"></button><button ng-click="submit()" translate="transactions.medcard_replacement.confirm" ng-disabled="medCardTncForm.$invalid || !data.verificationCode || medCardVerificationForm.$invalid" class="button button-major button-wide"></button></div></div></div></div><div id="step3" ng-if="steps===4" class="ng-enter"><div class="center margin-bottom-xl"><h2 translate="transactions.medcard_replacement.page4_title"></h2></div><div class="full-bleed status-message margin-bottom-medium"><div class="status-text-block margin-bottom-xs"><span translate="transactions.medcard_replacement.transact_status"></span><span ng-if="viewData.success === true" translate="transactions.medcard_replacement.submit_success" class="status-success"></span><span ng-if="viewData.success === false" translate="transactions.cc.submit_failed" class="status-fail"></span></div><span translate="transactions.medcard_replacement.confirmation_email_sent" class="pol-value"></span></div><div class="row"><div class="col-90 center-block"><div class="row has-border-padding margin-bottom-small"><div class="col-33"><span translate="transactions.medcard_replacement.plan_name" class="pol-value"></span><span class="pol-property">{{data.policyOwnerInfo.planName}}</span></div><div class="col-33"><span translate="transactions.medcard_replacement.policy_no" ,="," ng-if="data._Info.lineOfBiz !=='LAFT'" class="pol-value"></span><span translate="takaful.policy_no" ng-if="data._Info.lineOfBiz ==='LAFT'" class="pol-value"> </span><span class="pol-property">{{data.policyOwnerInfo.policyNo}}</span></div><div class="col-33"><span translate="transactions.medcard_replacement.insured_name" class="pol-value"></span><span class="pol-property">{{data.policyOwnerInfo.name}}</span></div></div><div class="has-border-padding margin-bottom-large"><h3 translate="transactions.medcard_replacement.requested_members"></h3><ul class="bullet-list"><li ng-repeat="candidate in viewData.selectedCandidates">{{candidate.name}}</li></ul></div><div class="has-border-padding margin-bottom-large"><div translate="transactions.medcard_replacement.to_be_delivered_to" class="h3"></div><span class="pol-value">{{data.addressInfo.address1}}</span><span class="pol-value">{{data.addressInfo.address2}}</span><span class="pol-value">{{data.addressInfo.address3}}</span><span class="pol-value">{{data.addressInfo.postCode}}, {{data.addressInfo.state}}, {{viewData.countryObj.country}}</span></div><br/><br/><div class="center"><button ng-click="close()" translate="transactions.cc.back_to_dashboard" class="button button-major button-wide"></button></div></div></div></div></ion-content></ion-view>