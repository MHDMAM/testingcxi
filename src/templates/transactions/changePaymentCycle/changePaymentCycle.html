<ion-view view-title="{{'transactions.changePaymentCycle.title' | translate}}"><ion-content class="page-padding"><div class="progress-container"><div class="progress-line"><div class="line line-3"><div class="progress-50"></div></div><div ng-class="{current:steps===1, completed:steps!==1}" class="stage stage-3"><span ng-if="steps==1" class="step-number">1</span><span ng-if="steps!=1" class="step-number ion-checkmark"></span><div class="step-label"></div></div><div ng-class="{current:steps===2, completed:steps===3}" class="stage stage-3"><span ng-if="steps!=3" class="step-number">2</span><span ng-if="steps==3" class="step-number ion-checkmark"></span><div class="step-label"></div></div><div ng-class="{current:steps===3}" class="stage stage-3"><span class="step-number">3</span><div class="step-label"></div></div></div></div><div id="step1" ng-if="steps===1"><div class="center margin-bottom-xl"><h2 translate="transactions.changePaymentCycle.step1.edit"></h2></div><div class="row"><div class="col-90 center-block"><h3 translate="transactions.changePaymentCycle.step1.title1"></h3><div class="row has-border-padding margin-bottom-large"><div class="col-50 padding-right-medium"><div class="row margin-bottom-small"><div class="col"><div translate="transactions.changePaymentCycle.policy_name" class="pol-value"></div><div class="pol-property">{{data.mainPolicyInfo.planName}}</div></div></div><div class="row"><div class="col"><div translate="transactions.changePaymentCycle.insured_name" class="pol-value"></div><div class="pol-property">{{data.mainPolicyInfo.insuredName}}</div></div></div></div><div class="col-50 padding-right-medium"><div class="row margin-bottom-small"><div class="col"><div translate="takaful.policy_no" ng-if="data.mainPolicyInfo.lineOfBiz ==='LAFT'" class="pol-value"> </div><div translate="transactions.changePaymentCycle.policy_no" ng-if="data.mainPolicyInfo.lineOfBiz !=='LAFT'" class="pol-value"></div><div class="pol-property">{{data.mainPolicyInfo.policyNo}}</div></div></div><div class="row"><div class="col"><div translate="transactions.changePaymentCycle.current_payment_cycle" class="pol-value"></div><div class="pol-property">RM{{data.mainPolicyInfo.totalPremiumAmount}} {{data.mainPolicyInfo.freqDesc}}</div><div class="pol-value">{{'transactions.changePaymentCycle.gst_1' | translate}} RM{{data.mainPolicyInfo.gstAmount}} {{'transactions.changePaymentCycle.gst_2' | translate}}</div></div></div></div></div></div></div><div class="row"><div class="col-90 center-block"><form name="cycleStep1Form"><h3 translate="transactions.changePaymentCycle.step1.title2"></h3><div class="row"><div ng-if="showChangeCycleOptions.toMonthly()" class="col-33 padding-right-medium"><div class="row"><label class="radio-button"><input type="radio" name="paymentFrequency" ng-model="viewData.selectedFreq" ng-value="'12'" ng-required="!viewData.selectedFreq"/><span class="indicator"></span><span>{{'transactions.changePaymentCycle.step1.monthly' | translate}} </span></label></div></div><div ng-if="showChangeCycleOptions.toQuarterly()" class="col-33 padding-right-medium"><div class="row"><label class="radio-button"><input type="radio" name="paymentFrequency" ng-model="viewData.selectedFreq" ng-value="'04'" ng-required="!viewData.selectedFreq"/><span class="indicator"></span><span>{{'transactions.changePaymentCycle.step1.quaterly' | translate}}</span></label></div></div><div ng-if="showChangeCycleOptions.toSemiAnnual()" class="col-33 padding-right-medium"><div class="row"><label class="radio-button"><input type="radio" name="paymentFrequency" ng-model="viewData.selectedFreq" ng-value="'02'" ng-required="!viewData.selectedFreq"/><span class="indicator"></span><span>{{'transactions.changePaymentCycle.step1.semi_anually' | translate}}</span></label></div></div><div ng-if="showChangeCycleOptions.toAnnual()" class="col-33 padding-right-medium"><div class="row"><label class="radio-button"><input type="radio" name="paymentFrequency" ng-model="viewData.selectedFreq" ng-value="'01'" ng-required="!viewData.selectedFreq"/><span class="indicator"></span><span>{{'transactions.changePaymentCycle.step1.annually' | translate}}</span></label></div></div></div></form><div class="row"><div class="clearfix"></div></div><div class="row"><div class="col"><ion-slide-box class="slider-card"><ion-slide ng-repeat="group in viewData.policyGroup"><div class="slide-container no-padding"><div class="row"><div ng-repeat="item in group" class="clock col-33 margin-bottom-medium"><div class="card padding-medium life-color"><span class="pol-property margin-bottom-xs">{{item.planName}}</span><div class="margin-bottom-xs"><span class="pol-value">{{'transactions.cancelAutoDebit.policy_no' | translate}} </span><span class="pol-value font-bold">{{item.policyNo}}</span></div><div class="margin-bottom-xs"><span class="pol-value">{{'transactions.changePaymentCycle.current_payment_cycle' | translate}}</span><div ng-if="item.freq =='01'"><span class="pol-value font-bold">RM{{item.totalPremiumAmount}} {{'transactions.changePaymentCycle.step1.annually' | translate}}</span><span class="pol-value">{{'transactions.changePaymentCycle.gst_1' | translate}} RM{{item.gstAmount | fix2}} {{'transactions.changePaymentCycle.gst_2' | translate}}</span></div><div ng-if="item.freq =='02'"><span class="pol-value font-bold">RM{{item.totalPremiumAmount}} {{'transactions.changePaymentCycle.step1.semi_anually' | translate}}</span><span class="pol-value">{{'transactions.changePaymentCycle.gst_1' | translate}} RM{{item.gstAmount | fix2}} {{'transactions.changePaymentCycle.gst_2' | translate}}</span></div><div ng-if="item.freq =='04'"><span class="pol-value font-bold">RM{{item.totalPremiumAmount}} {{'transactions.changePaymentCycle.step1.quaterly' | translate}}</span><span class="pol-value">{{'transactions.changePaymentCycle.gst_1' | translate}} RM{{item.gstAmount | fix2}} {{'transactions.changePaymentCycle.gst_2' | translate}}</span></div><div ng-if="item.freq =='12'"><span class="pol-value font-bold">RM{{item.totalPremiumAmount}} {{'transactions.changePaymentCycle.step1.monthly' | translate}}</span><span class="pol-value">{{'transactions.changePaymentCycle.gst_1' | translate}} RM{{item.gstAmount | fix2}} {{'transactions.changePaymentCycle.gst_2' | translate}}</span></div></div><div ng-if="viewData.selectedFreq" style="border-top: solid 1px #dbdad4; padding-top: 12px;"><span class="form-error-message">{{'transactions.changePaymentCycle.new_payment_cycle' | translate}}</span><div ng-if="viewData.selectedFreq == '01'"><span class="pol-value font-bold">RM{{item.annualPremWithGST}} {{'transactions.changePaymentCycle.step1.annually' | translate}}</span><span class="pol-value">{{'transactions.changePaymentCycle.gst_1' | translate}} RM{{item.annualGST | fix2}} {{'transactions.changePaymentCycle.gst_2' | translate}}</span></div><div ng-if="viewData.selectedFreq == '02'"><span class="pol-value font-bold">RM{{item.semiAnnualPremWithGST}} {{'transactions.changePaymentCycle.step1.semi_anually' | translate}}</span><span class="pol-value">{{'transactions.changePaymentCycle.gst_1' | translate}} RM{{item.semiAnnualGST | fix2}} {{'transactions.changePaymentCycle.gst_2' | translate}}</span></div><div ng-if="viewData.selectedFreq == '04'"><span class="pol-value font-bold">RM{{item.quarterlyPremWithGST}} {{'transactions.changePaymentCycle.step1.quaterly' | translate}}</span><span class="pol-value">{{'transactions.changePaymentCycle.gst_1' | translate}} RM{{item["quarterlyGST "] | fix2}} {{'transactions.changePaymentCycle.gst_2' | translate}}</span></div><div ng-if="viewData.selectedFreq == '12'"><span class="pol-value font-bold">RM{{item.monthlyPremWithGST}} {{'transactions.changePaymentCycle.step1.monthly' | translate}}</span><span class="pol-value">{{'transactions.changePaymentCycle.gst_1' | translate}} RM{{item.monthlyGST | fix2}} {{'transactions.changePaymentCycle.gst_2' | translate}}</span></div></div></div></div></div></div></ion-slide></ion-slide-box></div></div></div></div><button ng-click="updateState(2)" translate="transactions.changePaymentCycle.next" ng-disabled="!viewData.selectedFreq" class="center-block button button-major button-wide"></button></div><div id="step2" ng-if="steps===2" class="ng-enter"><div class="center margin-bottom-xl"><h2 translate="transactions.changePaymentCycle.step2.edit"></h2></div><div class="row"><div class="col-90 center-block"><h3 translate="transactions.changePaymentCycle.step2.title1"></h3><div class="row has-border-padding margin-bottom-large"><div class="col-50 padding-right-medium"><div class="row margin-bottom-small"><div class="col"><div translate="transactions.changePaymentCycle.policy_name" class="pol-value"></div><div class="pol-property">{{data.mainPolicyInfo.planName}}</div></div></div><div class="row"><div class="col"><div translate="transactions.changePaymentCycle.insured_name" class="pol-value"></div><div class="pol-property">{{data.mainPolicyInfo.insuredName}}</div></div></div></div><div class="col-50 padding-right-medium"><div class="row margin-bottom-small"><div class="col"><div ng-if="data.mainPolicyInfo.lineOfBiz ==='LAFT'" translate="takaful.policy_no" class="pol-value"></div><div ng-if="data.mainPolicyInfo.lineOfBiz !=='LAFT'" translate="transactions.changePaymentCycle.policy_no" class="pol-value"></div><div class="pol-property">{{data.mainPolicyInfo.policyNo}}</div></div></div><div class="row"><div class="col"><div translate="transactions.changePaymentCycle.new_payment_cycle" class="pol-value"></div><div class="pol-property">{{viewData.selectedFreqDesc}}</div></div></div></div></div></div></div><div class="full-bleed margin-bottom-xl"><div class="col-90 center-block"><p>{{'transactions.changePaymentCycle.step2.enter_vcode_title' | translate}} <span class="font-bold">{{data.clientDetails.mobileNo   | phonemask }}</span></p>{{'transactions.changePaymentCycle.step2.enter_vcode_title2' | translate}}<form name="cycleStep2Form" class="verification-block"><label class="item item-input margin-bottom-small margin-top-small"><input type="tel" ng-model="data.verificationCode" placeholder="Enter verification code" translate="transactions.medcard_replacement.resend_code" minlength="6" maxlength="6" required="required" class="center-block"/></label><button ng-click="requestOTP()" translate="transactions.medcard_replacement.resend_code" required="required" class="button button-major button-wide button-calm"></button><div class="checkbox-display-with-terms"><div class="agree-checkbox margin-top-medium margin-bottom-medium"><li class="item item-checkbox"><label class="checkbox"><input type="checkbox" name="tnc" ng-model="tncChecked" required="required"/></label><span>{{'transactions.changePaymentCycle.tc.read_tnc1' | translate}}&nbsp;</span><span translate="transactions.changePaymentCycle.tc.read_tnc2" ng-click="changePaymentCycTnC()" class="inline-link"> </span></li></div></div></form></div></div><div class="row"><div class="col"><div class="center-buttons"><button ng-click="cancel()" translate="transactions.changePaymentCycle.cancel" class="button button-calm button-wide button-major"></button><button ng-click="submit()" translate="transactions.changePaymentCycle.confirm" ng-disabled="cycleStep2Form.$invalid" class="button button-major button-wide"></button></div></div></div></div><div id="step2" ng-if="steps===3" class="ng-enter"><div class="center margin-bottom-xl"><h2 translate="transactions.cancelAutoDebit.step3.edit"></h2><div class="full-bleed status-message margin-bottom-xl"><div class="status-text-block margin-bottom-medium"><span ng-if="viewData.success === true" class="status-success">{{"transactions.changeAddress.submit_success" | translate}}</span><span ng-if="viewData.success === false" class="status-fail">{{"transactions.changeAddress.submit_failed" | translate}}</span></div><span ng-if="viewData.success === true" translate="transactions.changeAddress.step3.confirmation" class="pol-value"></span></div></div><div class="row"><div class="col-90 center-block"><div class="row has-border-padding margin-bottom-large"><div class="col-50 padding-right-medium"><div class="row"><div class="col"><div translate="transactions.changePaymentCycle.insured_name" class="pol-value"></div><div class="pol-property">{{data.mainPolicyInfo.insuredName}}</div></div></div></div></div><div class="row margin-bottom-large"><div class="col"><div class="row"><div class="col-33"><h3 translate="transactions.changePaymentCycle.policy_no"></h3></div><div class="col-67 margin-bottom-small"><h3>New "{{viewData.selectedFreq | duedatenumbertotext }}" Premium</h3><span class="negative-margin pol-value">Inclusive of GST - if any</span></div></div><div ng-repeat="policy in data.policies" class="row margin-bottom-small"><div class="col-33">    <div class="pol-value">{{policy.policyNo}}</div></div><div class="col-67"><div ng-if="viewData.selectedFreq == '01' " class="pol-value">RM{{policy.annualPremWithGST}}</div><div ng-if="viewData.selectedFreq == '02' " class="pol-value">RM{{policy.semiAnnualPremWithGST}}</div><div ng-if="viewData.selectedFreq == '04' " class="pol-value">RM{{policy.quarterlyPremWithGST}}</div><div ng-if="viewData.selectedFreq == '12' " class="pol-value">RM{{policy.monthlyPremWithGST}}</div></div></div></div></div><div class="row"><p>Your next {{viewData.selectedFreq | duedatenumbertotext }} premium is due on {{data.policies[0].confirmNextPremiumDueDate}}.</p></div></div></div><div class="center"><button ng-click="close()" translate="transactions.cancelAutoDebit.back_to_dashboard" class="button button-major button-wide margin-top-large"></button></div></div></ion-content></ion-view>