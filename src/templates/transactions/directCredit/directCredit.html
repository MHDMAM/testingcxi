<ion-view view-title="{{'transactions.dc.title' | translate}}"><ion-content class="page-padding"><div class="progress-container"><div class="progress-line"><div class="line line-3"><div class="progress-50"></div></div><div ng-class="{current:steps===1, completed:steps!==1}" class="stage stage-4"><span ng-if="steps==1" class="step-number">1</span><span ng-if="steps!=1" class="step-number ion-checkmark"></span><div class="step-label"> </div></div><div ng-class="{current:steps===2, completed:steps&gt;2}" class="stage stage-4"><span ng-if="steps!=4" class="step-number">2</span><span ng-if="steps&gt;2" class="step-number ion-checkmark"></span><div class="step-label"> </div></div><div ng-class="{current:steps===3, completed:steps===4}" class="stage stage-4"><span ng-if="steps!=4" class="step-number">3</span><span ng-if="steps==4" class="step-number ion-checkmark"></span><div class="step-label"> </div></div><div ng-class="{current:steps===4}" class="stage stage-4"><span class="step-number">4</span><div class="step-label"> </div></div></div></div><div id="step1" ng-if="steps===1"><div class="center margin-bottom-xl"><h2 translate="transactions.dc.step1.title"></h2></div><div class="row"><div class="col-90 center-block"><h3 translate="transactions.dc.form_header"></h3><div class="row has-border-padding margin-bottom-large"><div class="col-25 padding-right-medium"><div translate="transactions.dc.person_covered" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.policyOwnerName || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.identification_no" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.idNo || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.mobile_no" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.mobileNo || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.email_id" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.email || 'N/A'}}</div></div></div></div></div><div class="row"><div class="col-90 center-block"><form name="thisForm"><h3 translate="transactions.dc.step1.form_title"></h3><div class="row margin-bottom-large"><div class="col-50 padding-right-medium"><span translate="transactions.dc.step1.bank_name" class="pol-value"></span><label ng-class="{'form-error-input':thisForm.bankName.$dirty &amp;&amp; !thisForm.bankName.$valid}" class="item item-input selectArrow input-margin"><select name="bankName" ng-model="data.bankInfo" ng-options="bank as bank.bankName for bank in viewData.bankCodes" required="required"><option value="" translate="transactions.dc.step1.select_txt"></option></select></label><div ng-messages="thisForm.bankName.$error" ng-if="thisForm.bankName.$dirty &amp;&amp; !thisForm.bankName.$valid" class="error-container"><small ng-message="required" translate="transactions.dc.step1.err_bank_name" class="error"></small></div></div><div class="col-50 padding-right-medium"><span translate="transactions.dc.step1.bank_account_no" class="pol-value"></span><label ng-class="{'form-error-input':thisForm.accountNo.$dirty &amp;&amp; !thisForm.accountNo.$valid, 'disabledItem': !data.accountType}" class="item item-input input-margin"><input name="accountNo" type="tel" ng-model="data.accountNo" maxlength="{{data.bankInfo[data.accountType]}}" minlength="{{data.bankInfo[data.accountType]}}" required="required" ng-disabled="!data.accountType"/></label><div ng-messages="thisForm.accountNo.$error" ng-if="thisForm.accountNo.$dirty" class="error-container"><small ng-message="required" translate="transactions.dc.step1.err_bank_account_no" class="error"></small></div></div></div><div class="row margin-bottom-large"><div class="col-50 padding-right-medium"><span translate="transactions.dc.step1.account_type" class="pol-value"></span><div class="row margin-top-small"><div class="col-50"><label class="radio-button"><input type="radio" name="accountType" ng-model="data.accountType" value="saAcctDigit"/><span class="indicator"></span><span translate="transactions.dc.step1.savings"></span></label></div><div class="col-50"><label class="radio-button"><input type="radio" name="accountType" ng-model="data.accountType" value="curAcctDigit"/><span class="indicator"></span><span translate="transactions.dc.step1.current"></span></label></div></div></div></div><button ng-click="updateState(2)" translate="transactions.dc.next" ng-disabled="thisForm.$invalid" class="center-block button button-major button-wide"></button></form></div></div></div><div id="step2" ng-if="steps===2"><div class="center margin-bottom-xl"><h2 translate="transactions.dc.step2.title"></h2></div><div class="row"><div class="col-90 center-block"><h3 translate="transactions.dc.form_header"></h3><div class="row has-border-padding margin-bottom-large"><div class="col-25 padding-right-medium"><div translate="transactions.dc.person_covered" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.policyOwnerName || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.identification_no" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.idNo || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.mobile_no" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.mobileNo || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.email_id" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.email || 'N/A'}}</div></div></div></div></div><div class="row"><div class="col-90 center-block"><h3 translate="transactions.dc.step2.form_title"></h3><ion-slide-box class="slider-card"><ion-slide ng-repeat="group in viewData.splitPolicyInfo"><div class="slide-container"><div class="row"><div ng-repeat="item in group" class="clock col-50"><div class="item item-checkbox"><label class="checkbox"> <input type="checkbox" name="policy{{item.policyNo}}" ng-model="item" checklist-model="viewData.selectedPolicies" checklist-value="item" ng-checked="{{item.selected}}" ng-change="updateSelections()"/></label><span class="pol-property">{{item.planName}}</span><span ng-if="item.lineOfBiz !=='LAFT'" class="pol-value">{{ 'transactions.dc.policy_no'| translate}} {{item.policyNo}} </span><span ng-if="item.lineOfBiz ==='LAFT'" class="pol-value">{{ 'takaful.policy_no'| translate}} {{item.policyNo}} </span><span class="pol-value text-wrap">{{ 'transactions.dc.person_covered'| translate}}: {{item.insuredName}}</span></div></div></div></div></ion-slide></ion-slide-box></div></div><button ng-click="updateState(3)" translate="transactions.dc.next" ng-disabled="viewData.selectedPolicies.length === 0" class="center-block button button-major button-wide"></button></div><div id="step3" ng-if="steps===3"><div class="center margin-bottom-xl"><h2 translate="transactions.dc.step3.title"></h2></div><div class="row"><div class="col-90 center-block"><h3 translate="transactions.dc.form_header"></h3><div class="row has-border-padding margin-bottom-large"><div class="col-25 padding-right-medium"><div translate="transactions.dc.person_covered" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.policyOwnerName || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.identification_no" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.idNo || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.mobile_no" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.mobileNo || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.email_id" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.email || 'N/A'}}</div></div></div></div></div><div class="row"><div class="col-90 center-block"><h3 translate="transactions.dc.step3.form_title"></h3><ion-slide-box on-slide-changed="slideHasChanged($index)" class="slider-card"><ion-slide ng-repeat="group in viewData.selectedPolicies2"><div class="slide-container"><div class="row"><ul class="bullet-list"><li ng-repeat="item in group"> <span class="font-bold">{{item.planName}}, &nbsp;</span><span>{{item.policyNo}}, &nbsp; {{item.insuredName}}</span></li></ul></div></div></ion-slide></ion-slide-box></div></div><div class="full-bleed margin-bottom-large"><div class="row"><div class="col-80 center-block"><div class="form-container">     <span class="pol-value">{{'transactions.dc.step3.enter_vcode_title' | translate}} {{viewData.userInfo.mobileNo | phonemask}}</span><span translate="transactions.dc.step3.enter_vcode_title2" class="pol-value"></span><form name="ccVerificationCodeForm" class="verification-block">      <label class="item item-input margin-bottom-small margin-top-small"><input type="number" ng-model="viewData.verificationCode" placeholder="Enter verification code" translate="transactions.dc.step3.resend_code" required="required" minlength="6" maxlength="6" class="center-block"/></label><button ng-click="requestOTP()" translate="transactions.dc.step3.resend_code" class="button button-calm button-wide button-major"></button></form><div class="margin-bottom-xl margin-top-medium"><form class="checkbox-display-with-terms"><div class="agree-checkbox margin-top-medium"><li class="item item-checkbox"><label class="checkbox"><input type="checkbox" ng-model="viewData.readTnc" required="required"/></label><span>{{'transactions.dc.step3.terms_text1' | translate}}&nbsp;</span></li><span translate="transactions.dc.step3.terms_text2" ng-click="termsNconditions()" class="inline-link"> </span></div></form></div></div></div></div></div><div class="row"><div class="col"><div class="center-buttons"><button ng-click="cancelDirectCredit()" translate="transactions.dc.step3.cancel" class="button button-calm button-wide button-major"></button><button ng-click="submit()" translate="transactions.dc.step3.confirm" ng-disabled="!viewData.readTnc || !viewData.verificationCode" class="button button-major button-wide"></button></div></div></div></div><div id="step4" ng-if="steps===4"><div class="center margin-bottom-xl"><h2 translate="transactions.dc.step4.title"></h2></div><div class="full-bleed status-message margin-bottom-medium"><div class="status-text-block margin-bottom-xs"><span translate="transactions.dc.step4.transact_status"></span><span ng-if="viewData.success === true" translate="transactions.dc.step4.transact_success" class="status-success"></span><span ng-if="viewData.success === false" translate="transactions.dc.step4.transact_failed" class="status-fail"></span></div><span translate="transactions.dc.step4.confirmation" class="pol-value"></span></div><div class="row"><div class="col center-block"><div class="row"><div class="col-90 center-block"><h3 translate="transactions.dc.form_header"></h3><div class="row has-border-padding margin-bottom-large"><div class="col-25 padding-right-medium"><div translate="transactions.dc.person_covered" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.policyOwnerName || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.identification_no" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.idNo || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.mobile_no" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.mobileNo || 'N/A'}}</div></div><div class="col-25 padding-right-medium"><div translate="transactions.dc.email_id" class="pol-value"></div><div class="pol-property">{{viewData.userInfo.email || 'N/A'}}</div></div></div></div></div></div></div><div class="row"><div class="col-90 center-block"><h3 translate="transactions.dc.step4.form_title"></h3><ion-slide-box on-slide-changed="slideHasChanged($index)" class="slider-card"><ion-slide ng-repeat="group in viewData.selectedPolicies2"><div class="slide-container"><div class="row"><ul class="bullet-list"><li ng-repeat="item in group"> <span class="font-bold">{{item.planName}}, &nbsp;</span><span>{{item.policyNo}}, &nbsp; {{item.insuredName}}</span></li></ul></div></div></ion-slide></ion-slide-box><div class="center"><button ng-click="close()" translate=" transactions.dc.back_to_dashboard" class="button button-major button-wide margin-top-large"></button></div></div></div></div></ion-content></ion-view>