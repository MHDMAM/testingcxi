<ion-view view-title="{{'transactions.cancelAutoDebit.title' | translate}}"><ion-content class="page-padding"><div class="progress-container"><div class="progress-line"><div class="line line-3"><div class="progress-50"></div></div><div ng-class="{current:steps===1, completed:steps!==1}" class="stage stage-3"><span ng-if="steps==1" class="step-number">1</span><span ng-if="steps!=1" class="step-number ion-checkmark"></span><div class="step-label"></div></div><div ng-class="{current:steps===2, completed:steps===3}" class="stage stage-3"><span ng-if="steps!=3" class="step-number">2</span><span ng-if="steps==3" class="step-number ion-checkmark"></span><div class="step-label"></div></div><div ng-class="{current:steps===3}" class="stage stage-3"><span class="step-number">3</span><div class="step-label"></div></div></div></div><div id="step1" ng-if="steps===1"><div class="center margin-bottom-xl"><h2 translate="transactions.cancelAutoDebit.step1.edit"></h2></div><div class="full-bleed status-message margin-bottom-xl"><span translate="transactions.cancelAutoDebit.step1.wording2" class="block"></span></div><div class="row"><div class="col-80 center-block"><div class="row"><div class="col"><ion-slide-box on-slide-changed="slideHasChanged($index)" active-slide="viewData.selectedIndexStep" class="slider-card"><ion-slide ng-repeat="group in data.policyInfo"><div class="slide-container"><div class="row"><div ng-repeat="item in group" class="clock col-50"><div class="item item-checkbox"><label class="checkbox"> <input type="checkbox" name="policy{{item.policyNo}}" ng-model="item" ng-checked="{{item.selected}}" checklist-model="viewData.selectedPolicies" checklist-value="item" ng-change="updateSelections()" required="required"/></label><span class="pol-property">{{item.planName}}</span><span class="pol-value">{{'transactions.cancelAutoDebit.policy_no' | translate}} {{item.policyNo}}</span><span class="pol-value text-wrap">{{'transactions.cancelAutoDebit.person_covered' | translate}} {{item.insuredName}}</span></div></div></div></div></ion-slide></ion-slide-box></div></div></div></div><button ng-click="updateState(2)" translate="transactions.cancelAutoDebit.next" ng-disabled="viewData.selectedPolicies.length===0" class="center-block button button-major button-wide"></button></div><div id="step2" ng-if="steps===2" class="ng-enter"><div class="center margin-bottom-xl"><h2 translate="transactions.cancelAutoDebit.step2.edit"></h2></div><div class="row"><div class="col-90 center-block"><h3 translate="transactions.cancelAutoDebit.step2.details"></h3><div class="row has-border-padding margin-bottom-large"><div class="col-33 padding-right-medium"><ul class="bullet-list"><li translate="transactions.cancelAutoDebit.step2.paymentInfo"></li></ul></div></div><div class="row margin-bottom-large"><div class="col center-block"><h3 translate="transactions.cancelAutoDebit.step2.update"></h3><ion-slide-box on-slide-changed="slideHasChanged($index)" active-slide="viewData.selectedIndexStep3" class="slider-card"><ion-slide ng-repeat="group in viewData.selectedPolicies2"><div class="slide-container"><div class="row"><ul class="bullet-list"><li ng-repeat="policy in group"> <span class="font-bold">{{policy.planName}} </span>{{policy.policyNo}} 
{{policy.insuredName}}                   </li></ul></div></div></ion-slide></ion-slide-box></div></div></div></div><div class="full-bleed margin-bottom-xl"><div class="col-90 center-block"><p>{{'transactions.cancelAutoDebit.step2.enter_vcode_title' | translate}} <span class="font-bold">{{data.clientDetails.mobileNo | phonemask}}</span></p>{{'transactions.cancelAutoDebit.step2.enter_vcode_title2' | translate}}<form name="medCardVerificationForm" class="verification-block"><label class="item item-input margin-bottom-small margin-top-small"><input type="text" ng-model="data.verificationCode" placeholder="Enter verification code" translate="transactions.medcard_replacement.resend_code" minlength="6" maxlength="6" required="required" class="center-block"/></label><button ng-click="requestOTP()" translate="transactions.medcard_replacement.resend_code" required="required" class="button button-major button-wide button-calm"></button><div class="checkbox-display-with-terms"><div class="agree-checkbox margin-top-medium margin-bottom-medium"><li class="item item-checkbox"><label class="checkbox"><input type="checkbox" name="tnc" ng-model="tncChecked" required="required"/></label><span>{{'transactions.cancelAutoDebit.tc.read_tnc1' | translate}}&nbsp;</span></li><span translate="transactions.cancelAutoDebit.tc.read_tnc2" ng-click="autoDebitTnC()" class="inline-link"> </span></div></div></form></div></div><div class="row"><div class="col"><div class="center-buttons"><button ng-click="cancel()" translate="transactions.cancelAutoDebit.cancel" class="button button-calm button-wide button-major"></button><button ng-click="submit()" translate="transactions.cancelAutoDebit.confirm" ng-disabled="medCardVerificationForm.$invalid" class="button button-major button-wide"></button></div></div></div></div><div id="step2" ng-if="steps===3" class="ng-enter"><div class="center margin-bottom-xl"><h2 translate="transactions.cancelAutoDebit.step3.edit"></h2><div class="full-bleed status-message margin-bottom-xl"><div class="status-text-block margin-bottom-medium"><span ng-if="viewData.success === true" class="status-success">{{"transactions.changeAddress.submit_success" | translate}}</span><span ng-if="viewData.success === false" class="status-fail">{{"transactions.changeAddress.submit_failed" | translate}}</span></div><span ng-if="viewData.success === true" translate="transactions.changeAddress.step3.confirmation" class="pol-value"></span></div></div><div class="row"><div class="col-90 center-block"><h3 translate="transactions.cancelAutoDebit.step3.details"></h3><div class="row has-border-padding margin-bottom-large"><div class="col-33 padding-right-medium"><ul class="bullet-list"><li translate="transactions.cancelAutoDebit.step3.paymentInfo"></li></ul></div></div><div class="row margin-bottom-large"><div class="col center-block"><h3 translate="transactions.cancelAutoDebit.step2.update"></h3><ion-slide-box on-slide-changed="slideHasChanged($index)" active-slide="viewData.selectedIndexStep3" class="slider-card"><ion-slide ng-repeat="group in viewData.selectedPolicies2"><div class="slide-container"><div class="row"><ul class="bullet-list"><li ng-repeat="policy in group"> <span class="font-bold">{{policy.planName}} </span>{{policy.policyNo}} 
{{policy.insuredName}} </li></ul></div></div></ion-slide></ion-slide-box></div></div></div></div><div class="center"><button ng-click="close()" translate="transactions.cancelAutoDebit.back_to_dashboard" class="button button-major button-wide margin-top-large"></button></div></div></ion-content></ion-view>